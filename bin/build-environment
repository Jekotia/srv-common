#! /bin/bash
#DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
#init="`dirname ${DIR}`/init"
#source $init

if	[ -z "$FUNC" ] ; then
	FUNC="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/../functions/"
fi

source ${FUNC}init

if [ -z ${_COMMON+x} ]; then
  _COMMON=/srv/common
fi

declare -A env=()

source /srv/common/config/environment
if [ -f /srv/mercury/config/environment ] ; then
  source /srv/mercury/config/environment
fi

#source $_COMMON/config/environment
#source $_ROOT/config/environment

rm -vf "${_PUPPET_ENV}"
rm -vf "/etc/environment"

for i in "${!env[@]}"
do
  key=$i
  #echo "key  : ${key}"
  value=${env[$i]}
  #echo "value: ${value}"
  #eval ${key}=${value}
  envAdd "${key}" "${value}"
done

chown ${_UID}:${_GID} ${_PUPPET_ENV}

#DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
#source ${DIR}/functions/envAdd
#source ${DIR}/functions/isRoot
#envList="/saturn/puppet/envList"
